# coding: utf-8

import SRUextraction as sru
from stdf import *
from lxml import etree

arks = "ark:/12148/cb14571449q ark:/12148/cb12533159k ark:/12148/cb15020434p ark:/12148/cb12488688m ark:/12148/cb17740615v ark:/12148/cb16676218j ark:/12148/cb12331718t ark:/12148/cb136049153 ark:/12148/cb119683941 ark:/12148/cb135629866 ark:/12148/cb122410821 ark:/12148/cb120427987 ark:/12148/cb12252079k ark:/12148/cb125711488 ark:/12148/cb14437938w ark:/12148/cb120920719 ark:/12148/cb14559947x ark:/12148/cb145425488 ark:/12148/cb16710800m ark:/12148/cb121308593 ark:/12148/cb157554530 ark:/12148/cb11985856j ark:/12148/cb12001150h ark:/12148/cb123460514 ark:/12148/cb14400550b ark:/12148/cb121784154 ark:/12148/cb12201676x ark:/12148/cb170172802 ark:/12148/cb121965458 ark:/12148/cb12199919j ark:/12148/cb12073812t ark:/12148/cb123209047 ark:/12148/cb15011576x ark:/12148/cb14616948w ark:/12148/cb15593148k ark:/12148/cb14489389n ark:/12148/cb15015591s ark:/12148/cb12502056d ark:/12148/cb16549408q ark:/12148/cb121098856 ark:/12148/cb17705195b ark:/12148/cb15972431q ark:/12148/cb14580209w ark:/12148/cb12167664f ark:/12148/cb165311318 ark:/12148/cb13328347x ark:/12148/cb17160391h ark:/12148/cb166624198 ark:/12148/cb15704760t ark:/12148/cb159744405 ark:/12148/cb12565673m ark:/12148/cb170258646 ark:/12148/cb15112596z ark:/12148/cb135615020 ark:/12148/cb150512898 ark:/12148/cb158017383 ark:/12148/cb119656704 ark:/12148/cb17061860p ark:/12148/cb16629061t ark:/12148/cb16182927t ark:/12148/cb12565676n ark:/12148/cb170921838 ark:/12148/cb177776751 ark:/12148/cb15585057j ark:/12148/cb135360982 ark:/12148/cb162491803 ark:/12148/cb13197343d ark:/12148/cb169041583 ark:/12148/cb135177426 ark:/12148/cb177766137 ark:/12148/cb12128811t ark:/12148/cb15598560r ark:/12148/cb12485013b ark:/12148/cb13517616c ark:/12148/cb160615794 ark:/12148/cb162056246 ark:/12148/cb16635559w ark:/12148/cb17048733s ark:/12148/cb162347465 ark:/12148/cb17026841s ark:/12148/cb15502406c ark:/12148/cb14291743c ark:/12148/cb14293147k ark:/12148/cb17762378t ark:/12148/cb171335241 ark:/12148/cb170157981 ark:/12148/cb164587237 ark:/12148/cb137505931 ark:/12148/cb14444145f ark:/12148/cb14438888d ark:/12148/cb17133547p ark:/12148/cb12435995z ark:/12148/cb144388694 ark:/12148/cb12483109w ark:/12148/cb17044039z ark:/12148/cb12504867r ark:/12148/cb146619899 ark:/12148/cb14591035b ark:/12148/cb14662649g ark:/12148/cb164750668 ark:/12148/cb17702056f ark:/12148/cb13325370q ark:/12148/cb14596321p ark:/12148/cb17717080q ark:/12148/cb170693669 ark:/12148/cb16555483q ark:/12148/cb17770547t ark:/12148/cb14291810p ark:/12148/cb17063964t ark:/12148/cb170289092 ark:/12148/cb146622768 ark:/12148/cb124464800 ark:/12148/cb155322022 ark:/12148/cb16145371j ark:/12148/cb161255365 ark:/12148/cb123670199 ark:/12148/cb144429753 ark:/12148/cb13331369r ark:/12148/cb12155900b ark:/12148/cb14408737m ark:/12148/cb161712728 ark:/12148/cb177002090 ark:/12148/cb171317154 ark:/12148/cb170939753 ark:/12148/cb171600894 ark:/12148/cb171557652 ark:/12148/cb12046925j ark:/12148/cb12016336x ark:/12148/cb120773352 ark:/12148/cb120433673 ark:/12148/cb122197483 ark:/12148/cb13194727j ark:/12148/cb125545778 ark:/12148/cb120232991 ark:/12148/cb146117484 ark:/12148/cb12228167p ark:/12148/cb17711111q ark:/12148/cb123487281 ark:/12148/cb17761027v ark:/12148/cb16548857s ark:/12148/cb120271882 ark:/12148/cb177272589 ark:/12148/cb12071178b ark:/12148/cb14293147k ark:/12148/cb16135383b ark:/12148/cb14422307j ark:/12148/cb15608565s ark:/12148/cb14531112q ark:/12148/cb14480164k ark:/12148/cb157338985 ark:/12148/cb12099201c ark:/12148/cb151187948 ark:/12148/cb136027330 ark:/12148/cb15079578s ark:/12148/cb16545320b ark:/12148/cb156653919 ark:/12148/cb14583901s ark:/12148/cb17750808b ark:/12148/cb12008332t ark:/12148/cb12237793v ark:/12148/cb157451309 ark:/12148/cb155530234 ark:/12148/cb14503046m ark:/12148/cb12081720w ark:/12148/cb12085494k ark:/12148/cb157276495 ark:/12148/cb17099895w ark:/12148/cb17770547t ark:/12148/cb162377504 ark:/12148/cb15121868h ark:/12148/cb123420290 ark:/12148/cb123213980 ark:/12148/cb15059918m ark:/12148/cb15535769f ark:/12148/cb11973390n ark:/12148/cb177770741 ark:/12148/cb124663568 ark:/12148/cb165995724 ark:/12148/cb124663599 ark:/12148/cb14291244b ark:/12148/cb17060034p ark:/12148/cb17766840g ark:/12148/cb17084012r ark:/12148/cb13750598r ark:/12148/cb161358157 ark:/12148/cb17049503j ark:/12148/cb14557486z ark:/12148/cb166054292 ark:/12148/cb17165394r ark:/12148/cb17148669p ark:/12148/cb167585027 ark:/12148/cb171128126 ark:/12148/cb16595998z ark:/12148/cb166048513 ark:/12148/cb17136594x ark:/12148/cb166105191 ark:/12148/cb16569899c ark:/12148/cb165993074 ark:/12148/cb166042356 ark:/12148/cb170772495 ark:/12148/cb16601166g ark:/12148/cb17732613f ark:/12148/cb17731265b ark:/12148/cb14578636m ark:/12148/cb14548849w ark:/12148/cb16705145n ark:/12148/cb135175012 ark:/12148/cb16729657d ark:/12148/cb145673428 ark:/12148/cb177145555 ark:/12148/cb144447453"

report = create_file("cas_test_aut.xml")

query = f"idPerenne any \"{arks}\""
result = sru.SRU_result(query, "http://noticesservices.bnf.fr/SRU", {"recordSchema": "InterXMarc_Complet"})
for ark in result.dict_records:
    xmlrec = etree.tostring(result.dict_records[ark], encoding="utf-8").decode("utf-8")
    line2report([xmlrec], report)